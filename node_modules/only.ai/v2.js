
const chalk = require("chalk")

const axios = require("axios")
const EventEmitter = require("node:events")
const config = {
    hata:"[API] Bir Hata Oluştu."
}
module.exports = (soru, ayarlar, EventEmitter) => {      // if(!getConfigData) throw new TypeError("[HATA] Lütfen bir accessToken anahtarı kullanınız!")
    try{
        this.emit = EventEmitter;
    console.log(chalk.green("> Only.ai <") + chalk.yellow(" | Başlatıldı!"))
console.log(chalk.blue("Yapımcı:") + chalk.red("Only Cheeini (https://www.nicat-dcw.xyz)"))
    if(!soru) throw new TypeError(config.soruError)
    //const data = await axios.get(`https://gateway.nicat-dcw.xyz/api/v1/ai?q=${soru}`)
    const data = axios.get(`https://gateway.nicat-dcw.xyz/api/v2/ai?q=${encodeURI(soru)}`).then(resp => {
       console.log(data && resp.data.answer)
        return data && resp.data.answer || config.hata;
    })
        
    } catch(error) {
     //   this.emit("hata", error)
        console.error(error)
        const hata = new Error(error)
      //  hata()
        return `${config.hata}`
 //   }
   }

}